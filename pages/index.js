import Head from "next/head"
import Image from "next/image"
import Styles from "styles/Index.module.css"
import Link from "next/link"
import AppLayout from "components/AppLayout"
import { colors } from "styles/theme"
import Button from "components/Button"
import GitHub from "components/Icons/Github"
import { signInWithGitHub, getGitHubUser, signout } from "supabase/client"
import { useEffect, useState } from "react"
import Avatar from "components/Avatar"
import { useRouter } from "next/router"
import Loading from "components/Loading"
import { useUser } from "hooks/useUser"
import MobileMenu from 'containers/MobileMenu'
import BottomBar from 'containers/BottomBar'
import TopBar from 'containers/TopBar'


export default function Home() {
  // const [user, setUser] = useState(undefined)
  const router = useRouter()

  // getStateUser

  const handleClick = () => {
    signInWithGitHub()
  }

  // useEffect(() => {
  //   checkUser()
  //   window.addEventListener("hashchange", () => {
  //     checkUser()
  //   })
  // }, [])

  // useEffect(() => {
  //   user && router.replace("/home")
  // }, [user])

  // const checkUser = async () => {
  //   getGitHubUser.then((user) => {
  //     if (user) {
  //       // const { avatar, username, emial } = user
  //       setUser(user)
  //     } else {
  //       setUser(null)
  //     }
  //   })
  // }

  const {user} = useUser()

  return (
    <>
      <Head>
        <title>DevterğŸ¦…</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <TopBar />
      <MobileMenu />
      <BottomBar />
      <div></div>
      <div>
        <div>
          <header>
            <h2>Devter</h2>
          </header>
          <main>
            <div className={Styles.mainDiv}></div>
          </main>
        </div>
      </div>
  </>
)}
